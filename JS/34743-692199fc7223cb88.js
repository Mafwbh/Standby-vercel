"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c3310424-ffdf-5345-851a-f6e95bc28282")}catch(e){}}();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34743],{283590:function(e,t,a){a.d(t,{R:function(){return l}});var o=a(609151),n=a(892848),s=a(944131),i=a(173750);let r=e=>"month"===e.frequency.interval&&1===e.frequency.intervalCount,d=e=>{var t;return(null==e?void 0:null===(t=e.billing)||void 0===t?void 0:t.plan)==="hobby"};function l(e){var t,a,l,u;let g=(0,i.F)(null==e?void 0:e.billing);if(d(e))return{start:(0,o.Z)((0,n.Z)(g,30)).getTime(),end:(0,s.Z)(g).getTime()};let{start:c,end:b}=(null==e?void 0:null===(l=e.billing)||void 0===l?void 0:null===(a=l.subscriptions)||void 0===a?void 0:null===(t=a.find(r))||void 0===t?void 0:t.period)??(null==e?void 0:null===(u=e.billing)||void 0===u?void 0:u.period)??{};return{start:c,end:b}}},235644:function(e,t,a){a.d(t,{i:function(){return i}});var o=a(626705),n=a.n(o),s=a(606409);let i=e=>{let t=n()(e,"timestamp"),a=0,o=Object.keys(t).reduce((e,o)=>{let n;let i=t[o];if(o.endsWith("Z"))n=s.ou.fromISO(o).toJSDate();else{let e=`${o.split(" ").join("T")}.000Z`;n=s.ou.fromISO(e).toJSDate()}let r=i.reduce((e,t)=>e+t.count,0),d=i.map(e=>({name:e.projectName,id:e.projectId,title:e.projectName,percent:r?e.count/r:0})).sort((e,t)=>t.percent-e.percent),l=d.slice(0,3).map(e=>({...e,percent:Math.round(100*e.percent)})),u=d.slice(3).reduce((e,t)=>({...e,percent:e.percent+t.percent}),{id:null,name:"",title:"Other",percent:0});return l.push({...u,percent:Math.round(100*u.percent)}),a+=r,e.push({date:n.getTime(),sum:r,0:r,1:0,2:0,breakdown:l}),e},[]);return a?o:[]}},189517:function(e,t,a){a.d(t,{h:function(){return s}});var o=a(180498),n=a(94402);let s=(e,t,a)=>{let s;if(!(!(void 0===document.hidden||!document.hidden)||"cancelled"===e.message||(0,n.I)())&&!0!==e.missingToken&&!e.saml){switch(e.code){case"not_found":s=(0,o.Z)("30s");break;case"network_error":s=(0,o.Z)("10s");break;case"rate_limited":case"too_many_requests":s=(0,o.Z)("60s");break;case"not_acceptable":return;default:s=~~((Math.random()+.5)*(1<<Math.min(a.retryCount,8)))*(0,o.Z)("5s")}setTimeout(()=>void t(a),s)}}},585689:function(e,t,a){a.d(t,{M9:function(){return p},Op:function(){return m},SWRResetState:function(){return c}});var o=a(203713),n=a(875629),s=a(866666),i=a(23870);let r=0,d=0,l=new Map,u=new Map,g=null;function c(){let e=(0,s.usePathname)();return(0,i.useEffect)(()=>{r=0,d=0,l.clear(),u.clear(),null==g||g.setHiding()},[e]),null}function b(e){return(g=e,d)?e.setMessage({key:"fetch-swr-loading",preserve:!0,text:(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsx)(n.$,{}),(0,o.jsx)("span",{children:"\xa0\xa0Failed to load data, retrying..."})]})}):r?e.setMessage({key:"fetch-swr-loading",preserve:!0,text:(0,o.jsxs)("div",{style:{display:"flex"},children:[(0,o.jsx)(n.$,{}),(0,o.jsx)("span",{children:"\xa0\xa0Loading data..."})]})}):void e.setHiding()}function m(e,t){u.get(e)||(u.set(e,!0),++d,b(t))}function p(e,t){u.get(e)&&(u.set(e,!1),--d,b(t))}},995610:function(e,t,a){a.d(t,{Hw:function(){return c},ub:function(){return u},ZP:function(){return m},fW:function(){return b}});var o=a(23870),n=a(784499);let s={bandwidth:"bandwidth",execution:"serverlessFunctionExecution",images:"sourceImages",artifacts:"artifacts",edgeMiddleware:"edgeMiddlewareInvocations",edgeFunctions:"edgeFunctionExecutionUnits",monitoring:"monitoringMetric",edgeConfigReads:"edgeConfigRead",edgeConfigWrites:"edgeConfigWrite",postgresDatabase:"postgresDatabase",postgresComputeTime:"postgresComputeTime",postgresDataStorage:"postgresDataStorage",postgresDataTransfer:"postgresDataTransfer",postgresWrittenData:"postgresWrittenData",storageRedisTotalCommands:"storageRedisTotalCommands",storageRedisTotalBandwidthInBytes:"storageRedisTotalBandwidthInBytes",storageRedisTotalDailyAvgStorageInBytes:"storageRedisTotalDailyAvgStorageInBytes",storageRedisTotalDatabases:"storageRedisTotalDatabases",cronJobInvocations:"cronJobInvocation",dataCacheBandwidth:"dataCacheBandwidth",dataCacheRevalidations:"dataCacheRevalidations",logDrains:"logDrainsUsage",speedInsightsDataPoint:"analyticsUsage",webAnalyticsEvent:"webAnalyticsEvent",blobTotalAdvancedRequests:"blobTotalAdvancedRequests",blobTotalSimpleRequests:"blobTotalSimpleRequests",blobTotalGetResponseObjectSizeInBytes:"blobTotalGetResponseObjectSizeInBytes",blobTotalStores:"blobTotalStores",blobTotalAvgSizeInBytes:"blobTotalAvgSizeInBytes",fastDataTransfer:"fastDataTransfer",fastOriginTransfer:"fastOriginTransfer",edgeRequest:"edgeRequest",dataCacheRead:"dataCacheRead",dataCacheWrite:"dataCacheWrite"},i={bandwidth:"bandwidth",execution:"execution",images:"images",artifacts:"artifactsSize",edgeMiddleware:"workerInvocations",edgeFunctions:"edgeFunctionExecutionUnits",builds:"buildTime",monitoring:"monitoring",edgeConfigReads:"edgeConfigReads",edgeConfigWrites:"edgeConfigWrites",postgresDatabase:"postgresDatabase",postgresComputeTime:"postgresComputeTime",postgresDataStorage:"postgresDataStorage",postgresDataTransfer:"postgresDataTransfer",postgresWrittenData:"postgresWrittenData",storageRedisTotalCommands:"storageRedisTotalCommands",storageRedisTotalBandwidthInBytes:"storageRedisTotalBandwidthInBytes",storageRedisTotalDailyAvgStorageInBytes:"storageRedisTotalDailyAvgStorageInBytes",storageRedisTotalDatabases:"storageRedisTotalDatabases",cronJobInvocations:"cronJobInvocations",dataCacheBandwidth:"dataCacheBandwidth",dataCacheRevalidations:"dataCacheRevalidations",blobTotalAdvancedRequests:"blobTotalAdvancedRequests",blobTotalSimpleRequests:"blobTotalSimpleRequests",blobTotalGetResponseObjectSizeInBytes:"blobTotalGetResponseObjectSizeInBytes",blobTotalStores:"blobTotalStores",blobTotalAvgSizeInBytes:"blobTotalAvgSizeInBytes"},r={bandwidth:"sum",execution:"sum",images:"sum",artifacts:"0",edgeMiddleware:"sum",edgeFunctions:"sum",builds:"sum",monitoring:"sum",edgeConfigReads:"sum",edgeConfigWrites:"sum",postgresDatabase:"sum",postgresComputeTime:"sum",postgresDataStorage:"0",postgresDataTransfer:"sum",postgresWrittenData:"sum",storageRedisTotalCommands:"sum",storageRedisTotalBandwidthInBytes:"sum",storageRedisTotalDailyAvgStorageInBytes:"0",storageRedisTotalDatabases:"sum",cronJobInvocations:"sum",dataCacheBandwidth:"sum",dataCacheRevalidations:"sum",webAnalyticsEvent:"sum",speedInsightsDataPoint:"sum",blobTotalAdvancedRequests:"sum",blobTotalSimpleRequests:"sum",blobTotalGetResponseObjectSizeInBytes:"sum",blobTotalStores:"sum",blobTotalAvgSizeInBytes:"0"},d={bandwidth:100,builds:36e4,execution:100,images:1e3,artifacts:10,edgeMiddleware:1e6,edgeFunctions:5e5,monitoring:0,webAnalyticsEvent:2500,edgeConfigReads:5e4,edgeConfigWrites:250,postgresDatabase:1,postgresComputeTime:216e3,postgresDataStorage:256e6,postgresDataTransfer:256e6,postgresWrittenData:256e6,storageRedisTotalCommands:3e4,storageRedisTotalBandwidthInBytes:256e6,storageRedisTotalDailyAvgStorageInBytes:256e6,storageRedisTotalDatabases:1,cronJobInvocations:null,dataCacheBandwidth:1,dataCacheRevalidations:100,logDrains:0,speedInsightsDataPoint:1e4,blobTotalAdvancedRequests:5e4,blobTotalSimpleRequests:1e5,blobTotalGetResponseObjectSizeInBytes:1e8,blobTotalStores:1,blobTotalAvgSizeInBytes:2.5*1e8,fastDataTransfer:100,fastOriginTransfer:10,edgeRequest:1e6,dataCacheRead:1e6,dataCacheWrite:2e5},l={bandwidth:null,builds:144e4,execution:null,images:5e3,artifacts:10,edgeMiddleware:1e6,edgeFunctions:1e6,monitoring:25e4,webAnalyticsEvent:25e3,edgeConfigReads:1e6,edgeConfigWrites:500,postgresDatabase:null,postgresComputeTime:100,postgresDataStorage:.512,postgresDataTransfer:.512,postgresWrittenData:.512,storageRedisTotalCommands:null,storageRedisTotalBandwidthInBytes:null,storageRedisTotalDailyAvgStorageInBytes:null,storageRedisTotalDatabases:null,cronJobInvocations:null,dataCacheBandwidth:5,dataCacheRevalidations:100,logDrains:5*1e9,speedInsightsDataPoint:null,blobTotalAdvancedRequests:1e7,blobTotalSimpleRequests:1e6,blobTotalGetResponseObjectSizeInBytes:1e9,blobTotalStores:5,blobTotalAvgSizeInBytes:10*1e9,fastDataTransfer:1e3,fastOriginTransfer:100,edgeRequest:1e7,dataCacheRead:1e7,dataCacheWrite:2e6};function u(e){var t,a;let{team:o,type:n,used:i}=e,r=!o||(null===(t=o.billing)||void 0===t?void 0:t.plan)==="hobby",u=(null==o?void 0:null===(a=o.billing)||void 0===a?void 0:a.invoiceItems)||{},g="builds"===n?"builds":s[n],c="builds"===g?null:u[g],b=r?0:(null==c?void 0:c.batch)??null,m=(null==c?void 0:c.price)??null,p=r?d[n]:(null==c?void 0:c.threshold)??l[n];p&&("bandwidth"===n||"artifacts"===n||"dataCacheBandwidth"===n||"fastDataTransfer"===n||"fastOriginTransfer"===n)&&(p*=1e9);let f=null!==p&&i>p,T=null!==p&&p>0?Math.ceil(i/p*100):null;return{exceeded:f,increment:b,limit:p,percentage:T,used:i,pricePerIncrement:m}}function g(e){return e.reduce((e,t)=>e+t,0)}function c(e){return e.length?g(e)/e.length:0}function b(e){return e.reduce((e,t)=>Math.max(e,t),0)}function m(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,{team:s}=(0,n.Z)(),d=(0,o.useMemo)(()=>(function(e){let{data:t,type:a,aggregator:o}=e;return t?o(t[i[a]].map(e=>{let t=r[a];if("sum"===t){if("sum"in e)return e.sum;throw Error("Invalid data point")}let o=e[t];if(Array.isArray(o)){let[e,t]=o;return 0===t?0:e/t}return o})):0})({type:e,data:t,aggregator:a}),[t,e,a]);return u({team:s,type:e,used:d})}},917010:function(e,t,a){a.d(t,{B:function(){return u}});var o=a(23870),n=a(995610),s=a(601797),i=a(124857),r=a(551187),d=a(235644),l=a(110862);function u(e){let{start:t,end:a,include:u=["bandwidth","execution"]}=e,g=new Set(u),c=g.has("bandwidth")||g.has("execution"),b=g.has("images"),m=g.has("artifacts"),p=g.has("edgeMiddleware"),f=g.has("edgeFunctions"),T=g.has("builds"),v=g.has("monitoring"),h=g.has("edgeConfigReads")||g.has("edgeConfigWrites"),_=g.has("cronJobInvocations"),w=g.has("dataCacheBandwidth"),y=g.has("logDrains"),D=g.has("webAnalyticsEvent"),{data:R,isLoading:I}=(0,i.iK)({type:"requests",start:t,end:a,skip:!c}),{data:S,isLoading:C}=(0,i.iK)({type:"artifacts",start:t,end:a,skip:!m}),{data:B,isLoading:x}=(0,i.iK)({type:"edge",start:t,end:a,skip:!p}),{data:Z,isLoading:A}=(0,i.iK)({type:"edge",start:t,end:a,skip:!f,edgeInvocationType:"edge-function"}),{data:k,isLoading:O}=(0,i.iK)({type:"monitoring",start:t,end:a,skip:!v}),{data:j,isLoading:q}=(0,i.iK)({type:"builds",start:t,end:a,skip:!T}),{data:z,isLoading:E}=(0,i.iK)({type:"edge_config",start:t,end:a,skip:!h}),{data:U,isLoading:W}=(0,r.A)({startDatetime:t,endDatetime:a,skip:!b}),{data:P,isLoading:M}=(0,i.iK)({start:t,end:a,type:"cron_jobs",skip:!_}),{data:F,isLoading:J}=(0,i.iK)({start:t,end:a,type:"data_cache",skip:!w}),{data:L,isLoading:$}=(0,s.j2)({start:t,end:a,skip:!y}),{data:G,isLoading:N}=(0,l.z)({startDatetime:t,endDatetime:a,skip:!D}),K=(0,o.useMemo)(()=>({images:(0,d.i)((null==U?void 0:U.data)||[])}),[null==U?void 0:U.data]),H=(0,n.ZP)("images",K),Q=(0,n.ZP)("artifacts",S),V=(0,n.ZP)("bandwidth",R),X=(0,n.ZP)("builds",j),Y=(0,n.ZP)("execution",R),ee=(0,n.ZP)("edgeMiddleware",B),et=(0,n.ZP)("edgeFunctions",Z),ea=(0,n.ZP)("monitoring",k),eo=(0,n.ZP)("edgeConfigReads",z),en=(0,n.ZP)("edgeConfigWrites",z),es=(0,n.ZP)("cronJobInvocations",P),ei=(0,n.ZP)("dataCacheBandwidth",F),er=(0,n.ZP)("dataCacheRevalidations",F),ed=(0,o.useMemo)(()=>(null==L?void 0:L.usage)??(0,s.If)({rows:[]}),[L]),el=G.usage,eu={artifacts:S,bandwidth:R,builds:j,execution:R,images:U,edgeMiddleware:B,edgeFunctions:Z,monitoring:k,edgeConfigReads:z,edgeConfigWrites:z,cronJobInvocations:P,dataCacheBandwidth:F,dataCacheRevalidations:F,logDrains:L,postgresDatabase:void 0,postgresComputeTime:void 0,postgresDataStorage:void 0,postgresDataTransfer:void 0,postgresWrittenData:void 0,storageRedisTotalCommands:void 0,storageRedisTotalBandwidthInBytes:void 0,storageRedisTotalDailyAvgStorageInBytes:void 0,storageRedisTotalDatabases:void 0,webAnalyticsEvent:el,speedInsightsDataPoint:void 0};return{metricsAvailable:u.map(e=>eu[e]).every(Boolean),artifactMeta:Q,bandwidthMeta:V,buildsMeta:X,executionsMeta:Y,imagesMeta:H,edgeMiddlewareMeta:ee,edgeFunctionsMeta:et,monitoringMeta:ea,edgeConfigReadsMeta:eo,edgeConfigWritesMeta:en,cronJobInvocationsMeta:es,dataCacheBandwidthMeta:ei,logDrainsMeta:ed,webAnalyticsMeta:el,isLoading:I||C||x||A||O||q||E||W||M||J||$||N,dataCacheRevalidationsMeta:er}}},551187:function(e,t,a){a.d(t,{A:function(){return l},C:function(){return d}});var o=a(181674),n=a(499979),s=a(727833),i=a(33100),r=a(224066);let d=new Date("2023-01-18T17:00:00.000Z").getTime();function l(e){let{endDatetime:t,startDatetime:a,projectId:d,skip:l,buckets:u}=e,{isReady:g,team:c}=(0,r.t7)();return(0,o.ZP)(()=>g&&!l&&a&&t&&(!u||u.length)?`${n.Vh}${(0,s.c)({owner_id:null==c?void 0:c.id,teamId:null==c?void 0:c.id,projectId:d,buckets:u,from:"object"==typeof a?a.toISOString():new Date(a).toISOString(),to:"object"==typeof t?t.toISOString():new Date(t).toISOString()})}`:null,e=>(0,i.Io)(e),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:void 0})}},601797:function(e,t,a){a.d(t,{If:function(){return c},JX:function(){return g},j2:function(){return u}});var o=a(23870),n=a(181674),s=a(995610),i=a(499979),r=a(727833),d=a(33100),l=a(224066);function u(e){let{start:t,end:a,skip:s=!1}=e,{isReady:u,team:g}=(0,l.t7)(),b=(0,n.ZP)(()=>!s&&u&&t&&a?`${i.Pm}${(0,r.c)({type:"log_drains",teamId:null==g?void 0:g.id,from:"object"==typeof t?t.toISOString():new Date(t).toISOString(),to:"object"==typeof a?a.toISOString():new Date(a).toISOString()})}`:null,async e=>{let{rows:t}=await (0,d.Io)(e),a=c({rows:t,team:g});return{rows:t,lastUpdate:Date.now(),usage:a}},{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:void 0});return(0,o.useMemo)(()=>{let e=b.data?{...b.data,usage:c({rows:b.data.rows,team:g})}:void 0;return{...b,data:e}},[b,g])}let g=e=>e.map(e=>({date:new Date(e.interval_group).getTime(),sum:e.volume,0:e.volume,1:0,2:0}));function c(e){let{rows:t,team:a}=e,o=t.reduce((e,t)=>e+t.volume,0);return(0,s.ub)({team:a,type:"logDrains",used:o})}},124857:function(e,t,a){a.d(t,{e_:function(){return _},h$:function(){return h},iK:function(){return v}});var o=a(181674),n=a(854093),s=a(33100),i=a(727833),r=a(585689),d=a(189517),l=a(499979),u=a(94402),g=a(224066),c=a(819430),b=a(779854);let m={bandwidth:["bandwidth_outgoing_bytes","bandwidth_incoming_bytes"],requests:["request_hit_count","request_miss_count"],invocations:["function_invocation_successful_count","function_invocation_error_count","function_invocation_timeout_count"],edgeFunctionExecutionUnits:["edge_function_execution_units"],execution:["function_execution_successful_gb_hours","function_execution_error_gb_hours","function_execution_timeout_gb_hours"],workerInvocations:["worker_invocation_count"],throttles:["function_invocation_throttle_count"],buildTime:["build_build_seconds","build_queued_seconds"],buildNumber:["build_completed_count","build_failed_count"],images:["images_sources_count"],artifactsTaskDuration:["artifacts_downloaded_task_duration_ms","artifacts_local_cache_hit_task_duration_ms"],artifactsSize:["artifacts_downloaded_size_bytes","artifacts_uploaded_size_bytes"],artifactsCount:["artifacts_downloaded_count","artifacts_uploaded_count"],monitoring:["monitoring_metric_count"],edgeConfigReads:["edge_config_reads"],edgeConfigWrites:["edge_config_writes"],postgresDatabase:["postgres_databases"],postgresComputeTime:["postgres_compute_seconds"],postgresDataTransfer:["postgres_transfer_bytes"],postgresWrittenData:["postgres_written_bytes"],storageRedisTotalCommands:["redis_commands"],storageRedisTotalBandwidthInBytes:["redis_bandwidth_max_bytes"],storageRedisTotalDatabases:["redis_databases"],cronJobInvocations:["cron_job_invocations"],dataCacheBandwidth:["data_cache_total_received_bytes","data_cache_total_sent_bytes"],dataCacheRevalidations:["data_cache_total_revalidates"],blobTotalAdvancedRequests:["blob_advanced_request_count"],blobTotalSimpleRequests:["blob_simple_request_count"],blobTotalGetResponseObjectSizeInBytes:["blob_get_response_object_size_in_bytes"],blobTotalStores:["blob_stores"]},p={workerExecutionAvg:["worker_execution_time_avg"],storageRedisTotalDailyAvgStorageInBytes:["redis_storage_max_avg_bytes"],postgresDataStorage:["postgres_storage_byte_hours"],blobTotalAvgSizeInBytes:["blob_size_in_bytes"]},f={bandwidth:"bandwidth",requests:"requests",invocations:"function_invocations",execution:"function_execution",throttles:"function_throttle_count",workerExecutionAvg:"worker_execution_time_avg",workerInvocations:"worker_invocations",buildTime:"build_time",buildNumber:"build_count",images:"image_sources",artifactsSize:"artifacts_size_breakdown",artifactsCount:"artifacts_count_breakdown",artifactsTaskDuration:"artifacts_time_breakdown",monitoring:"monitoring",edgeConfigReads:"edge_config_reads",edgeConfigWrites:"edge_config_writes",postgresDatabase:"postgres_databases",postgresComputeTime:"postgres_compute_seconds",postgresDataStorage:"postgres_storage_byte_hours",postgresDataTransfer:"postgres_transfer_bytes",postgresWrittenData:"postgres_written_bytes",storageRedisTotalCommands:"redis_commands",storageRedisTotalBandwidthInBytes:"redis_bandwidth_max_bytes",storageRedisTotalDailyAvgStorageInBytes:"redis_storage_max_avg_bytes",storageRedisTotalDatabases:"redis_databases",cronJobInvocations:"cron_job_invocations",dataCacheBandwidth:"data_cache_bandwidth",dataCacheRevalidations:"data_cache_revalidations",blobDatabases:"blob_stores",blobTotalAvgSizeInBytes:"blob_size_in_bytes",blobTotalGetResponseObjectSizeInBytes:"blob_get_response_object_size_in_bytes",blobTotalAdvancedRequests:"blob_advanced_request_count",blobTotalSimpleRequests:"blob_simple_request_count"},T=e=>({revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:0,onError:(t,a)=>{let o=t.statusCode||t.status;404===o||403===o||"missing_team_param"===t.code||"cancelled"===t.message||(0,u.I)()||"pending"===t.message||(console.table(t),(0,r.Op)(a,e),console.error(t))},onSuccess:(t,a)=>{(0,r.M9)(a,e)},onErrorRetry:(e,t,a,o,n)=>{if("pending"===e.message)return setTimeout(o,3e3);(0,d.h)(e,o,n)}});function v(e,t){let{type:a,projectId:r=null,storeId:d=null,functionName:u=null,edgeConfigId:c=null,edgeInvocationType:v=null,sourceName:h=null,skip:_=!1,granularity:w,start:y,end:D}=e,{isReady:R,team:I}=(0,g.t7)(),{user:S,isNorthstar:C}=(0,b.a)(),B=(0,n.useToasts)();return(0,o.ZP)(()=>R&&S&&y&&D&&!_&&void 0!==r&&void 0!==u&&(!C||S.defaultTeamId||I)?function(e){let{type:t,projectId:a=null,storeId:o=null,functionName:n=null,edgeConfigId:s=null,edgeInvocationType:r=null,sourceName:d=null,granularity:u,start:g,end:c,teamId:b}=e;return`${l.Pm}${(0,i.c)({type:t,teamId:b,projectId:a,storeId:o,edgeConfigId:s,functionName:n,edgeInvocationType:r,sourceName:d,granularity:u,from:"object"==typeof g?g.toISOString():new Date(g).toISOString(),to:"object"==typeof c?c.toISOString():new Date(c).toISOString()})}`}({type:a,projectId:r,storeId:d,functionName:u,edgeConfigId:c,edgeInvocationType:v,sourceName:h,granularity:w,start:y,end:D,teamId:null==I?void 0:I.id}):null,async e=>(function(e){var t,a,o,n,s;let{data:i,from:r,to:d,team:l,queryContext:u}=e;if("pending"in i)throw Error("pending");let g=[];if(i.data.length)for(let e=0;e<i.data.length;e++)g.push(i.data[e]);let c={workerExecutionAvg:"2022-05-24T00:00:00.000Z",postgresDataStorage:"2023-04-01T00:00:00.000Z",storageRedisTotalDailyAvgStorageInBytes:"2023-04-01T00:00:00.000Z",blobTotalAvgSizeInBytes:"2023-08-01T00:00:00.000Z"},b={bandwidth:"2021-01-26T00:00:09.000Z",requests:"2021-01-26T00:00:09.000Z",invocations:"2021-02-16T00:00:00.000Z",edgeFunctionExecutionUnits:"2021-02-16T00:00:00.000Z",execution:"2021-02-16T00:00:00.000Z",workerInvocations:"2021-10-22T00:00:00.000Z",throttles:"2021-02-16T00:00:00.000Z",buildTime:"2021-02-19T00:00:00.000Z",buildNumber:"2021-02-19T00:00:00.000Z",images:"2021-07-01T00:00:00.000Z",artifactsTaskDuration:"2021-12-14T00:00:00.000Z",artifactsSize:"2021-12-14T00:00:00.000Z",artifactsCount:"2021-12-14T00:00:00.000Z",monitoring:"2023-03-06T00:00:00.000Z",edgeConfigReads:"2023-03-14T00:00:00.000Z",edgeConfigWrites:"2023-03-14T00:00:00.000Z",postgresDatabase:"2023-04-01T00:00:00.000Z",postgresComputeTime:"2023-04-01T00:00:00.000Z",postgresDataTransfer:"2023-04-01T00:00:00.000Z",postgresWrittenData:"2023-04-01T00:00:00.000Z",storageRedisTotalCommands:"2023-04-01T00:00:00.000Z",storageRedisTotalBandwidthInBytes:"2023-04-01T00:00:00.000Z",storageRedisTotalDatabases:"2023-04-01T00:00:00.000Z",cronJobInvocations:"2023-04-01T00:00:00.000Z",dataCacheBandwidth:"2023-05-01T00:00:00.000Z",dataCacheRevalidations:"2023-05-01T00:00:00.000Z",blobTotalAdvancedRequests:"2023-08-01T00:00:00.000Z",blobTotalSimpleRequests:"2023-08-01T00:00:00.000Z",blobTotalGetResponseObjectSizeInBytes:"2023-08-01T00:00:00.000Z",blobTotalStores:"2023-08-01T00:00:00.000Z",...c},T={edge:new Date(i.lastUpdate).getTime(),builds:new Date(i.lastUpdate).getTime(),images:new Date(i.lastUpdate).getTime(),artifacts:new Date(i.lastUpdate).getTime(),monitoring:new Date(i.lastUpdate).getTime(),edgeConfigReads:new Date(i.lastUpdate).getTime(),edgeConfigWrites:new Date(i.lastUpdate).getTime(),postgresDatabase:new Date(i.lastUpdate).getTime(),postgresComputeTime:new Date(i.lastUpdate).getTime(),postgresDataStorage:new Date(i.lastUpdate).getTime(),postgresDataTransfer:new Date(i.lastUpdate).getTime(),postgresWrittenData:new Date(i.lastUpdate).getTime(),storageRedisTotalCommands:new Date(i.lastUpdate).getTime(),storageRedisTotalBandwidthInBytes:new Date(i.lastUpdate).getTime(),storageRedisTotalDailyAvgStorageInBytes:new Date(i.lastUpdate).getTime(),storageRedisTotalDatabases:new Date(i.lastUpdate).getTime(),cronJobInvocations:new Date(i.lastUpdate).getTime(),dataCacheBandwidth:new Date(i.lastUpdate).getTime(),dataCacheRevalidations:new Date(i.lastUpdate).getTime(),blobTotalAdvancedRequests:new Date(i.lastUpdate).getTime(),blobTotalSimpleRequests:new Date(i.lastUpdate).getTime(),blobTotalGetResponseObjectSizeInBytes:new Date(i.lastUpdate).getTime(),blobTotalStores:new Date(i.lastUpdate).getTime(),blobTotalAvgSizeInBytes:new Date(i.lastUpdate).getTime()},v={bandwidth:[],requests:[],invocations:[],edgeFunctionExecutionUnits:[],execution:[],workerInvocations:[],workerExecutionAvg:[],throttles:[],buildTime:[],buildNumber:[],images:[],artifactsTaskDuration:[],artifactsSize:[],artifactsCount:[],monitoring:[],edgeConfigReads:[],edgeConfigWrites:[],postgresDatabase:[],postgresComputeTime:[],postgresDataStorage:[],postgresDataTransfer:[],postgresWrittenData:[],storageRedisTotalCommands:[],storageRedisTotalBandwidthInBytes:[],storageRedisTotalDailyAvgStorageInBytes:[],storageRedisTotalDatabases:[],cronJobInvocations:[],dataCacheBandwidth:[],dataCacheRevalidations:[],blobTotalAvgSizeInBytes:[],blobTotalAdvancedRequests:[],blobTotalSimpleRequests:[],blobTotalGetResponseObjectSizeInBytes:[],blobTotalStores:[]},h={bandwidth:[],requests:[],invocations:[],edgeFunctionExecutionUnits:[],execution:[],workerInvocations:[],throttles:[],buildTime:[],buildNumber:[],images:[],artifactsSize:[],artifactsTaskDuration:[],artifactsCount:[],monitoring:[],edgeConfigReads:[],edgeConfigWrites:[],postgresDatabase:[],postgresComputeTime:[],postgresDataTransfer:[],postgresWrittenData:[],storageRedisTotalCommands:[],storageRedisTotalBandwidthInBytes:[],storageRedisTotalDatabases:[],cronJobInvocations:[],dataCacheBandwidth:[],dataCacheRevalidations:[],blobTotalAdvancedRequests:[],blobTotalSimpleRequests:[],blobTotalGetResponseObjectSizeInBytes:[],blobTotalStores:[]},_={workerExecutionAvg:[],postgresDataStorage:[],storageRedisTotalDailyAvgStorageInBytes:[],blobTotalAvgSizeInBytes:[]},w={},y={};for(let e=0;e<g.length;e++){let t=g[e];for(let e in m){let a=new Date(t.first_event).getTime(),o={date:new Date(t.date).getTime(),sum:0,0:0,1:0,2:0};if((a||o.date)<Date.parse(b[e]))continue;let n=0;for(let a=0;a<m[e].length;a++){let s=a;o[s]=t[m[e][a]]||0,o.sum+=o[s],t.previous&&(n+=o[s],n-=t.previous[m[e][a]]??0),y[e]=y[e]??{},y[e][a]=(y[e][a]??0)+o[s]}h[e].push(o),w[e]=(w[e]||0)+n}for(let e in p){let a={date:new Date(t.date).getTime(),0:[0,0],1:[0,0],2:[0,0]};for(let o=0;o<p[e].length;o++){let n=(a.date>=Date.parse(c[e])?t[p[e][o]]:void 0)||[0,0];a[o]="number"==typeof n?[n,1]:n}_[e].push(a)}}let D="number"==typeof r?r:r.getTime(),R=D-(("number"==typeof d?d:d.getTime())-D);for(let e in m)new Date(b[e]).getTime()>R&&delete w[e];if(l&&(null===(t=y.buildTime)||void 0===t?void 0:t[1])&&Math.round(y.buildTime[1]/3600)>=1&&v.buildTime.push({type:"tooManySecondsQueued",secondsQueued:y.buildTime[1],teamSlug:l.slug,warning:!0}),(null===(a=y.invocations)||void 0===a?void 0:a[1])&&y.invocations[1]>=1&&v.invocations.push({type:"tooManyInvocationErrors",errorCount:y.invocations[1],warning:!0}),(null===(o=y.execution)||void 0===o?void 0:o[1])&&y.execution[1]>=.01&&v.execution.push({type:"tooManyExecutionErrors",errorTime:y.execution[1],warning:!0}),(null===(n=y.images)||void 0===n?void 0:n[0])?(!l||(null===(s=l.billing)||void 0===s?void 0:s.plan)==="hobby")&&y.images[0]>1e3&&v.images.push({type:"aboveImagesFairUseLimit",optimizedImages:y.images[0],warning:!0}):v.images.push({type:"noImageData",warning:!0}),!l&&"edge"===u.type&&"middleware"===u.edgeInvocationType){let e={sum:0,count:0};for(let t of _.workerExecutionAvg){let{date:a,breakdown:o,...n}=t;for(let[t,a]of Object.values(n))e.sum+=t,e.count+=a}e.sum/e.count>5e4&&v.workerExecutionAvg.push({type:"aboveEdgeMiddlewareCpuTimeFairUseLimit",warning:!0})}let I=Object.entries(f),S=Object.entries({...h,..._});return I.forEach(e=>{let[t,a]=e;S.forEach(e=>{let[o,n]=e;if(o===t){let e=i.data.length-n.length;for(let t=0;t<i.data.slice(e).length;t++){let e=i.data[t].breakdown,o=e[a];e&&o&&(n[t].breakdown=o)}}})}),{from:new Date(r),to:new Date(d),granularity:i.granularity,change:w,started:b,lastUpdate:T,insight:v,...h,..._}})({data:await (0,s.Io)(e,{throwOnHTTPError:!0}),from:y,to:D,team:I,queryContext:{type:a,edgeInvocationType:v}}),{...T(B),...t})}function h(e){let{type:t,skip:a=!1,start:r,end:d,edgeInvocationType:u}=e,{isReady:c,team:b}=(0,g.t7)(),m=(0,n.useToasts)();return(0,o.ZP)(()=>c&&r&&d&&!a?`${l.Pm}${(0,i.c)({type:t,edgeInvocationType:u,teamId:null==b?void 0:b.id,from:"object"==typeof r?r.toISOString():new Date(r).toISOString(),to:"object"==typeof d?d.toISOString():new Date(d).toISOString()})}`:null,async e=>(function(e,t,a){let o={workerExecutionAvg:[]};for(let t of e.data){let e=new Date(t.date).getTime();o.workerExecutionAvg.push({date:e,data:t.worker_execution_time_avg})}return{from:new Date(t),to:new Date(a),granularity:e.granularity,lastUpdate:new Date(e.lastUpdate).getTime(),data:o}})(await (0,s.Io)(e),r,d),T(m))}function _(e,t){let{isReady:a,team:n}=(0,g.t7)(),{isLoading:r,can:d}=(0,c.ZP)(),u=!r&&d(c.aU.Read,c._z.UsageCycle);return(0,o.ZP)(()=>!a||!u||(null==e?void 0:e.skip)?null:`${l.Pm}${(0,i.c)({teamId:null==n?void 0:n.id,cycles:"1"})}`,e=>(0,s.Io)(e,{throwOnHTTPError:!0}),t)}},110862:function(e,t,a){a.d(t,{_:function(){return u},z:function(){return g}});var o=a(181674),n=a(499979),s=a(727833),i=a(33100),r=a(995610),d=a(224066),l=a(779854);let u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);t.setDate(t.getDate()-30),t.setUTCHours(0,0,0,0);let a=new Date(e);return a.setUTCHours(23,59,59,999),{start:t,end:a}};function g(e){let{endDatetime:t,startDatetime:a,projectId:u,skip:g=!1}=e,{isReady:c,team:b}=(0,d.t7)(),{user:m,isNorthstar:p}=(0,l.a)(),{data:f,isLoading:T,error:v}=(0,o.ZP)(()=>!g&&c&&m&&(!p||m.defaultTeamId||b)&&a&&t?`${n.HE}${(0,s.c)({projectId:u,from:"object"==typeof a?a.toISOString():new Date(a).toISOString(),to:"object"==typeof t?t.toISOString():new Date(t).toISOString(),teamId:null==b?void 0:b.id})}`:null,async e=>{let t=await (0,i.Io)(e);if(!Array.isArray(t))throw Error("Invalid response");return t},{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:void 0}),h=f??[],_=h.reduce((e,t)=>e+t.count,0);return{data:{rows:h,usage:(0,r.ub)({type:"webAnalyticsEvent",team:b,used:_})},isLoading:T,error:v}}},683497:function(e,t,a){a.d(t,{ButtonLink:function(){return g}});var o=a(203713),n=a(23870),s=a(425135),i=a(311441),r=a(574908),d=a(605889),l=a(129750),u=a.n(l);function g(e){let{href:t,as:a,tab:n,shallow:l,scroll:g,children:b,prefetch:m,icon:p,...f}=e;return f.disabled||f.loading?(0,o.jsx)(d.Button,{...f,children:b}):"string"==typeof t&&(n||t&&!(0,r.e)(t)||f.download)?(0,o.jsxs)(d.Button,{Component:"a",href:f.disabled?void 0:t,rel:n?"noopener":void 0,target:n?"_blank":void 0,...f,children:[b,p?(0,o.jsx)(i.d,{className:u().externalIcon,size:"1em",weight:"bold"}):null]}):(0,o.jsx)(s.default,{as:a,href:t,legacyBehavior:!0,passHref:!!t,prefetch:m,scroll:g,shallow:l,children:(0,o.jsx)(c,{Component:"a",rel:n?"noopener":void 0,target:n?"_blank":void 0,...f,children:b})})}let c=(0,n.forwardRef)((e,t)=>{let{children:a,onClick:n,onMouseEnter:s,...i}=e;return(0,o.jsx)(d.Button,{ref:t,...i,passthroughOnClick:n,passthroughOnMouseEnter:s,children:a})});c.displayName="ButtonWrapper"},324109:function(e,t,a){a.d(t,{U:function(){return s}});var o=a(203713),n=a(697576);function s(e){let{children:t,"data-testid":a,...s}=e;return(0,o.jsx)(n.s,{"data-testid":a,...s,isLink:!0,children:t})}}}]);
//# debugId=c3310424-ffdf-5345-851a-f6e95bc28282
